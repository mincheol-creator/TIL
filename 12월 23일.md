# 12월 23일

### Docker란?

- 오픈소스 컨테이너 프로젝트, 전세계적으로 큰 인기를 끌고있음

- AWS, Google cloud platform, Microsoft Azure등의 클라우드 서비스 공식 지원



### 도커가 인기가 있는 이유

- 복잡한 리눅스 어플리케이션을 컨테이너로 묶어서 실행할 수 있음

- 개발, 테스트, 서비스환경을 하나로 통일하여 효율적으로 관리 할 수 있다.

- 컨테이너(이미지)를 전 세계 사람들과 공유, GitHub와 비슷한 방식의 Docker Hub 제공



### 컨테이너는?

- 가상화보다 훨씬 가벼운 기술 (VM Ware보다 가벼움)



### 가상화

- 컴퓨터 안에서 컴퓨터를 만들어내기 위한 시도
- 60년대 개념이 처음 등장
- 서버에 가상머신을 여러개 띄어서 일을 더 시킬라함
- 가상머신에 각종 서버 프로그램, DB등을 설치하여 애플리케이션이나 웹사이트를 실행
- 미리 구축한 가상 머신 이미지를 여러 서버에 복사하여 실행하면 이미지 하나로 서버를 계속 만들어낼 수 있음
- 가상화 기술을 이용하여 서버를 임대해주는 서비스가 클라우드 서비스



### 가상머신의 문제점

- 컴퓨터를 통째로 만들어내다 보니 각종 **성능 손실**이 발생
- 인텔과 AMD는 CPU 안에 가상화 기능을 넣기 시작 -> 그래도 **느림**

- 호스트와 커널을 공유하는 반가상화 기술이 등장
- 이미지 안에 OS가 포함되기 때문에 이미지 용량이 커짐
- 네트워크로 가상화 이미지를 주고 받는 건 꽤 부담스러움
- 오픈소스 가상화 소프트웨어는 OS 가상화에 만 주력, 베포와 관리 기능이 부족
- 가상머신의 성능문제가 있다 보니 리눅스 컨테이너가 나옴



### 리눅스 컨테이너

- 컨테이너 안에 가상공간을 만들지만 실행 파일을 호스트에서 직접 실행, 독립된 공간을 제공 받지만, 실행은 컨테이너 안이 아닌 호스트에서 실행
- 이건 리눅스 커널의 cgroups, name spaces가 제공하는 기술
- 가상화가 아닌 격리
- 도커는 리눅스 컨테이너 기술을 이용한다.
  1. 초기에는 LXC(Linux container)를 기반으로 구현
  2. 버전 0.9부터는 LXC를 대신하는 libcontainer를 개발하여 사용
  3. 실행 옵션으로 선택 가능



### 도커의 특징

하드웨어를 효율적으로 쓰기위해 만든 가상화 기술, 이전의 단점들을 해소하기 위해 개발

- 도커는 게스트 OS를 설치하지 않음

  - 이미지에 서버 운영을 위한 프로그램과 라이브러리만 격리해서 설치

  - 이미지 용량이 크게 줄어듦

  - 호스트와 OS자원(시스템 콜)을 공유

- 도커의 성능
  - 도커는 하드웨어 가상화 계층이 없음
    - 메모리 접근, 파일 시스템, 네트워크 전송 속도가 가상 머신에 비해 월등히 빠름
    - 호스트와 도커 컨테이너 사이의 성능 차이가 크지 않음(오차 범위 안)

- 이미지 생성과 배포에 특화 -> 도커 이미지를 네트워크 통해서 공유 가능
- 이미지 버전 관리도 제공하고 중앙 저장소에 이미지를 올리고 받을 수 있음
- DockHub 제공
- 다양한 API를 제공하여 원하는 만큼 자동화 가능, 개발과 서버 운영에 매우 유용



### 도커 이미지 & 도커 컨테이너

- **이미지**는 서비스 운영에 필요한 서버 프로그램, 소스코드, 컴파일된 실행 파일을 묶은 형태, 저장소에 올리고 받는건 이미지
- **컨테이너**는 이미지를 실행한 상태

- **이미지**로 여러 개의 **컨테이너**를 만들 수 있음
- 운영체제로 치면 <u>이미지는 실행파일</u>이고 <u>컨테이너는 프로세스</u>



### 도커의 이미지 처리 방식

- 유니온 파일 시스템 형식으로 관리(aufs, btrfs, devicemapper)

- 해당하는 파일을 잘게 잘라서 바뀐 부분만 바꿔치기

  -> 자원의 낭비를 최소화 시킴

- Docker Hub 및 개인 저장소에서 이미지를 공유할 때 바뀐 부분만 주고 받음



### immutable infrastructure 

- 한번 설정한 운영 환경은 변경하지 않는다(Immutable)

- 서비스가 업데이트 되면 운영환경자체를 변경하지 않고 이미지를 새로 생성하여 배포

- 편리한 관리, 확장, 테스트가 간편, 가벼움





Docker는 서비스 운영 환경을 묶어서 손쉽게 배포하고 실행하는 기술



Windows에서 Docker 실행할라면 Windows 기능 켜기/끄기 -> Hyper-V 체크 활성화 





root@server:~# cp /media/root/VMware\ Tools/VMwareTools-10.3.10-13959562.tar.gz .

​																		\는 Space 역할